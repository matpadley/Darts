@section Scripts {
    <script>

        function toggleMultiplier(button)
        {
            let otherButtonId = button.id === 'double' ? 'treble' : 'double';
            document.getElementById(otherButtonId).disabled = !document.getElementById(otherButtonId).disabled;
            document.getElementById('bullseyeThrow').disabled = !document.getElementById('bullseyeThrow').disabled;
            document.getElementById('outerBullThrow').disabled = !document.getElementById('outerBullThrow').disabled;
        }

        function handleThrow()
        {
            let multiplier = 'S';
            let throwValue = document.getElementById('throwValue').value;
            let trebleValue = document.getElementById('treble').disabled ? false : true;
            let doubleValue = document.getElementById('double').disabled ? false : true;

            // if the throw value is empty alert the user and don't carry on
            // only do this if the throw value is not the bullseye or outer bull

            if (throwValue === "" && !bullValue && !outerBullThrow) {
                alert("Please enter a throw value");
                return;
            }

            if (trebleValue && !doubleValue) {
                multiplier = 'T';
            }
            else if (doubleValue && !trebleValue) {
                multiplier = 'D';
            }
            
            fetch('/RoundTheBoard/Throw', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({multiplier: multiplier, throwValue: throwValue})
            })
                .then(response => // redierct to the home page
                    window.location.href = '/roundtheboard/index'
                )
                .catch(error => console.error('Error:', error));
        }

        function handleMiss()
        {

            fetch('/RoundTheBoard/Throw', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({multiplier: "S", throwValue: "0"})
            })
                .then(response => // redierct to the home page
                    window.location.href = '/roundtheboard/index'
                )
                .catch(error => console.error('Error:', error));
        }

        // create a function named handlethrow that has a parameter of the button
        function setThrow(button) {
            // set the value of the hiden throwValue input to the value of the button
            document.getElementById('throwValue').value = button.value;
            
            // call the handleThrow function
            handleThrow();
        }

    </script>
}

<div class="d-flex mb-2">
    <div class="d-flex flex-column w-75">
        <div class="d-flex flex-fill">
            <div class="d-flex flex-column w-50 me-2">
                <button class="btn btn-primary bullseye" id="bullseyeThrow" value="50" onclick="setThrow(this)">Bull</button>
            </div>
            <div class="d-flex flex-column w-50">
                <button class="btn btn-primary outerbull" id="outerBullThrow" value="25" onclick="setThrow(this)">Outer Bull</button>
            </div>
        </div>
        <div class="d-flex flex-fill" aria-label="Multiplier">
            <div class="d-flex flex-column w-50 me-2">
                <button class="btn score-buttons multiplier" name="multiplier" id="double" value="D" onclick="toggleMultiplier(this)">Double</button>
            </div>
            <div class="d-flex flex-column w-50">
                <button class="btn score-buttons multiplier" name="multiplier" id="treble" value="T" onclick="toggleMultiplier(this)">Treble</button>
            </div>
            </div>
        <div class="mt-2">
            <input type="hidden" id="throwValue"/>
            <div class="score-button-group">
                <button class="btn score-buttons boardScoreDark" value="1" onclick="setThrow(this)">1</button>
                <button class="btn score-buttons boardScoreLight" value="2" onclick="setThrow(this)">2</button>
                <button class="btn score-buttons boardScoreDark" value="3" onclick="setThrow(this)">3</button>
                <button class="btn score-buttons boardScoreLight" value="4" onclick="setThrow(this)">4</button>
                <button class="btn score-buttons boardScoreDark" value="5" onclick="setThrow(this)">5</button>
            </div>
            <div class="score-button-group">
                <button class="btn score-buttons boardScoreLight" value="6" onclick="setThrow(this)">6</button>
                <button class="btn score-buttons boardScoreDark" value="7" onclick="setThrow(this)">7</button>
                <button class="btn score-buttons boardScoreLight" value="8" onclick="setThrow(this)">8</button>
                <button class="btn score-buttons boardScoreDark" value="9" onclick="setThrow(this)">9</button>
                <button class="btn score-buttons boardScoreLight" value="10" onclick="setThrow(this)">10</button>
            </div>
            <div class="score-button-group">
                <button class="btn score-buttons boardScoreDark" value="11" onclick="setThrow(this)">11</button>
                <button class="btn score-buttons boardScoreLight" value="12" onclick="setThrow(this)">12</button>
                <button class="btn score-buttons boardScoreDark" value="13" onclick="setThrow(this)">13</button>
                <button class="btn score-buttons boardScoreLight" value="14" onclick="setThrow(this)">14</button>
                <button class="btn score-buttons boardScoreDark" value="15" onclick="setThrow(this)">15</button>
            </div>
            <div class="score-button-group">
                <button class="btn score-buttons boardScoreLight" value="16" onclick="setThrow(this)">16</button>
                <button class="btn score-buttons boardScoreDark" value="17" onclick="setThrow(this)">17</button>
                <button class="btn score-buttons boardScoreLight" value="18" onclick="setThrow(this)">18</button>
                <button class="btn score-buttons boardScoreDark" value="19" onclick="setThrow(this)">19</button>
                <button class="btn score-buttons boardScoreLight" value="20" onclick="setThrow(this)">20</button>
            </div>
        </div>
    </div>
    <button type="button" class="btn btn-outline-secondary ms-2 w-auto" onclick="handleMiss()">Miss</button>
</div>